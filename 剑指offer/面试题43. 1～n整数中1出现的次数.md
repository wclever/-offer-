## [面试题43. 1～n整数中1出现的次数](https://leetcode-cn.com/problems/1nzheng-shu-zhong-1chu-xian-de-ci-shu-lcof/)

输入一个整数 `n` ，求1～n这n个整数的十进制表示中1出现的次数。

例如，输入12，1～12这些整数中包含1 的数字有1、10、11和12，1一共出现了5次。

**示例 1：**

```
输入：n = 12
输出：5
```

**示例 2：**

```
输入：n = 13
输出：6
```

**限制：**

- `1 <= n < 2^31`

**思路**

总体思想就是分类，先求所有数中个位是 `1` 的个数，再求十位是 `1` 的个数，再求百位是 `1` 的个数...

假设 `n = xyzdabc`，此时我们求千位是 `1` 的个数，也就是 `d` 所在的位置。

那么此时有三种情况，

- `d == 0`，那么千位上 `1` 的个数就是 `xyz * 1000`
- `d == 1`，那么千位上 `1` 的个数就是 `xyz * 1000 + abc + 1`

- `d > 1`，那么千位上 `1` 的个数就是 `xyz * 1000 + 1000`

注意到 `d > 1` 的时候，我们多加了一个 `k`，我们可以通过计算 `long xyz = xyzd / 10;` 的时候，给 `xyzd` 多加 `8`，从而使得当 `d > 1` 的时候，此时求出来的 `xyz` 会比之前大 `1`，这样计算 `xyz * k` 的时候就相当于多加了一个 `k`。`k` 溢出的问题，我们可以通过 `long` 类型解决。

时间复杂度：*O(log<sub>10</sub> (n))*

空间复杂度：只需要*O(1)* 的额外空间。

```java
    public int countDigitOne(int n) {
        int count = 0;
        for(long k = 1; k <= n; k *= 10){
            long r = n / k, m = n % k;
            count += (r + 8) / 10 * k + (r % 10 == 1 ? m + 1 : 0);
        }
        return count;
    }
```

